---
import { twMerge } from 'tailwind-merge';
import { getLangFromUrl, useTranslatedPath } from '../../i18n/utils';
import { getPermalink } from '~/utils/permalinks';
import { Icon } from 'astro-icon/components';

let lang = getLangFromUrl(Astro.url);
lang = lang == 'pt' ? 'en' : 'pt';
const name = lang == 'pt' ? 'circle-flags:pt' : 'circle-flags:en';
const translatePath = useTranslatedPath(lang);
const {
  classes = "", // Additional custom classes
} = Astro.props;
const href = translatePath(getPermalink('/'));
---
<a
  href={href}
  class={twMerge(
    "inline-flex items-center px-4 py-2 me-2 bg-page hover:bg-gray-200 dark:hover:bg-slate-600 rounded transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",
    classes
  )}
>
  <Icon name={name}/>
  <!-- <img -->
  <!--   src={icon} -->
  <!--   alt="Flag Icon" -->
  <!--   class="w-5 h-5 mr-2 object-contain" -->
  <!-- /> -->
  <!-- <span>{label}</span> -->
</a>
